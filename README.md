# goserver
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges package from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->
# goserver

This README documents only the public API exported by the `goserver` package.

Short summary
 - `goserver` provides a `Config` struct and a `ServerHandler` type. Create a handler with `New(*Config)` and control a server process using exported methods on `ServerHandler`.

Public API (types and functions)

- type `Config`
	- Fields (public fields used by the package):
		- `AppRootDir string`
		- `SourceDir string`
		- `OutputDir string`
		- `ArgumentsForCompilingServer func() []string`
		- `ArgumentsToRunServer func() []string`
		- `AppPort string`
		- `Logger func(message ...any)`
		- `ExitChan chan bool`

- func `NewConfig() *Config` — returns a new Config with sensible default values

- type `ServerHandler`
	- Construct with: `New(c *Config) *ServerHandler`
	- Exported methods (signatures as found in source):
		- `MainInputFileRelativePath() string` — returns the path to the generated/external main server file inside the configured `SourceDir`.
		- `Name() string` — returns the server name (`"GoServer"`).
		- `UnobservedFiles() []string` — files that should not be observed by file watchers (executables, temp files).
		- `RestartServer() error` — restart the external server.
		- `StartServer(wg *sync.WaitGroup)` — starts the external server; intended to be run as a goroutine and calls `wg.Done()` when finished.
		- `NewFileEvent(fileName, extension, filePath, event string) error` — handle file system events; recognized events include `create` and `write` for triggering generation/compilation/restart.

Notes and behaviour
- The package may generate an external server file from embedded templates when the external file is missing. That generation and other internal helpers are not part of the public API (they are unexported).
- The README intentionally documents only the exported surface. Implementation details, unexported helpers and additional files in `templates/` or `docs/` are not documented here.

Minimal usage example

```go
package main

import (
		"fmt"
		"os"
		"sync"
		"github.com/cdvelop/goserver"
)

func main() {
		cfg := &goserver.Config{
				AppRootDir:               ".",
				SourceDir:                "src/cmd/appserver",
				OutputDir:                "deploy/appserver",
				ArgumentsForCompilingServer: func() []string { return []string{} },
				ArgumentsToRunServer:        func() []string { return []string{} },
				AppPort:                  "8080",
				Logger:                   func(messages ...any) { fmt.Fprintln(os.Stdout, messages...) },
				ExitChan:                 make(chan bool),
		}

		handler := goserver.New(cfg)

		var wg sync.WaitGroup
		wg.Add(1)
		go handler.StartServer(&wg)
		wg.Wait()
}
```

If you want more documentation about embedded templates or design rationale, consult the `templates/` and `docs/` folders which contain implementation docs — they are not part of the exported API surface described here.


## [Contributing](https://github.com/cdvelop/cdvelop/blob/main/CONTRIBUTING.md)